{% extends 'layout.html' %}

{% block js %}
$().ready(function()
{
{% if not form.username.data -%}
$('#username-div input').focus();
{% else -%}
$('#password-div input').focus();
{% endif -%}
});
{% endblock %}

{% block header %}
{% endblock %}

{% macro addfield(xfield, value=True) -%}
  <div class="clearfix control-group{% if xfield.errors %} error{% endif %}">
    <label for="{{ xfield.name }}" class="control-label">{{ xfield.label.text }}
      {% if xfield.flags.required %}<abbr title="Required field.">*</abbr>{% endif %}</label>
    <div class="controls" id="{{ xfield.name }}-div">
      <input id="{{ xfield.name }}" name="{{ xfield.name }}" type="{{ xfield.widget.input_type }}"{% if value %} value="{{ xfield.data|replace(None,'') }}"{% endif %}>
      {% if xfield.errors -%}
        {% for error in xfield.errors %}<span class="alert help-inline">{{ error }}</span>{% endfor %}
      {% endif -%}
    </div>
  </div>
{% endmacro -%}

{% block body %}
  <div id="content" class="span7">
<form method="POST" action="/login" class="well form-horizontal">

  <legend>Login</legend>

  {{ addfield(form.username) }}

  {{ addfield(form.password, value=False) }}
        
  <div class="clearfix control-group">
    <label for="remember" class="control-label">Remember me</label>
    <div class="controls">
      <input id="remember" name="remember" type="checkbox" value="y"{% if form.remember.data %} checked="checked"{% endif %}>
    </div>
  </div>

  {{ form.hidden_tag() }}

  <div class="clearfix form-actions" id="submit-div">
    <input id="submit" name="submit" type="submit" value="Login" class="btn btn-primary">
  </div>
</form>
 </div>

{% endblock %}
